<div class="dashboard-container">
  <app-page-header
    title="Dashboard Clienti"
    subtitle="Gestione anagrafica e monitoraggio revenue"
  ></app-page-header>

  <main class="content-area">
    <div style="margin-bottom: 20px;">
      <button class="btn-action" (click)="openModal()">Aggiungi Cliente</button>
    </div>

    <div *ngIf="customers$ | async as customers; else loading">
      <table class="custom-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nome</th>
            <th>Azienda</th>
            <th>Stato</th>
            <th>Fatturato</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let customer of customers">
            <td>#{{ customer.id }}</td>
            <td>
              <div class="user-info">
                <strong class="id-link" [routerLink]="['/customers', customer.id]">{{ customer.name }}</strong>
                <small>{{ customer.email }}</small>
              </div>
            </td>
            <td>{{ customer.company }}</td>
            <td>
              <span
                class="status-badge"
                [ngClass]="customer.status.toLowerCase()"
              >
                {{ customer.status }}
              </span>
            </td>
            <td class="revenue">{{ customer.revenue | currency : "EUR" }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Simple Modal Component -->
    <app-customer-modal
      [isOpen]="isModalOpen"
      (close)="closeModal()"
      (save)="saveCustomer($event)"
    ></app-customer-modal>

    <ng-template #loading>

      <div class="loading-state">
        <div class="spinner"></div>
        <p>Caricamento dati aziendali...</p>
      </div>
    </ng-template>
  </main>
</div>
