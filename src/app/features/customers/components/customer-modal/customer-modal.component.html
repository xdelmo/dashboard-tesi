@if (isOpen()) {
<div class="modal-overlay">
  <div class="modal-content" [formGroup]="customerForm">
    <h2>{{ customerToEdit() ? "Modifica Cliente" : "Nuovo Cliente" }}</h2>

    <div class="form-group">
      <label>Nome</label>
      <input
        pInputText
        type="text"
        formControlName="name"
        [invalid]="
          customerForm.get('name')?.invalid && customerForm.get('name')?.touched
        "
      />
      @if (customerForm.get('name')?.errors?.['required'] &&
      customerForm.get('name')?.touched) {
      <p-message severity="error" variant="simple" size="small">
        Nome richiesto
      </p-message>
      }
    </div>

    <div class="form-group">
      <label>Email</label>
      <input
        pInputText
        type="email"
        formControlName="email"
        [invalid]="
          customerForm.get('email')?.invalid &&
          customerForm.get('email')?.touched
        "
      />
      @if (customerForm.get('email')?.errors?.['required'] &&
      customerForm.get('email')?.touched) {
      <p-message severity="error" variant="simple" size="small">
        Email richiesta
      </p-message>
      } @if (customerForm.get('email')?.errors?.['email'] &&
      customerForm.get('email')?.touched) {
      <p-message severity="error" variant="simple" size="small">
        Email non valida
      </p-message>
      }
    </div>

    <div class="form-group">
      <label>Azienda</label>
      <input
        pInputText
        type="text"
        formControlName="company"
        [invalid]="
          customerForm.get('company')?.invalid &&
          customerForm.get('company')?.touched
        "
      />
      @if (customerForm.get('company')?.errors?.['required'] &&
      customerForm.get('company')?.touched) {
      <p-message severity="error" variant="simple" size="small">
        Azienda richiesta
      </p-message>
      }
    </div>

    <div class="form-group">
      <label>Stato</label>
      <p-select
        formControlName="status"
        [options]="statusOptions"
        optionLabel="label"
        optionValue="value"
        [style]="{ width: '100%' }"
        [invalid]="
          customerForm.get('status')?.invalid &&
          customerForm.get('status')?.touched
        "
      >
      </p-select>
    </div>

    <div class="form-group">
      <label>Fatturato</label>
      <p-inputNumber
        formControlName="revenue"
        mode="currency"
        currency="EUR"
        locale="it-IT"
        [style]="{ width: '100%' }"
        [invalid]="
          customerForm.get('revenue')?.invalid &&
          customerForm.get('revenue')?.touched
        "
      >
      </p-inputNumber>
      @if (customerForm.get('revenue')?.errors?.['min'] &&
      customerForm.get('revenue')?.touched) {
      <p-message severity="error" variant="simple" size="small">
        Il fatturato non pu√≤ essere negativo
      </p-message>
      }
    </div>

    <div class="form-actions">
      <p-button
        label="Annulla"
        severity="secondary"
        (onClick)="onClose()"
      ></p-button>
      <p-button
        label="Salva"
        (onClick)="onSave()"
        [disabled]="customerForm.invalid"
      ></p-button>
    </div>
  </div>
</div>
}
